<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maze Game - Bring Mitthi to Krishna</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Playfair Display', serif;
            background: linear-gradient(135deg, #ffe6eb 0%, #ffd6e0 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }

        .game-container {
            text-align: center;
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(255, 77, 109, 0.2);
        }

        h1 {
            font-family: 'Pacifico', cursive;
            color: #d6336c;
            font-size: 42px;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #ff4d6d;
            font-size: 20px;
            margin-bottom: 25px;
        }

        .instructions {
            background: #fff0f3;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 18px;
            color: #5a3d5c;
            border-left: 5px solid #ff4d6d;
        }

        .maze-wrapper {
            position: relative;
            margin: 0 auto 30px;
            width: fit-content;
        }

        canvas {
            border: 4px solid #ff85a1;
            border-radius: 10px;
            background-color: #f8f9fa;
            display: block;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            width: 70px;
            height: 70px;
            font-size: 28px;
            background: #ff4d6d;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(255, 77, 109, 0.3);
        }

        .control-btn:hover {
            background: #ff758c;
            transform: scale(1.05);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .control-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            width: 100%;
        }

        #up-btn {
            margin-bottom: 5px;
        }

        .characters {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 25px;
        }

        .character {
            text-align: center;
        }

        .char-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin: 0 auto 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .mitthi {
            background: #ff4d6d;
            color: white;
        }

        .krishna {
            background: #4cc9f0;
            color: white;
        }

        .char-name {
            font-family: 'Pacifico', cursive;
            font-size: 20px;
            color: #5a3d5c;
        }

        #message {
            font-family: 'Pacifico', cursive;
            font-size: 28px;
            color: #ff006e;
            min-height: 40px;
            margin-top: 20px;
            padding: 10px;
            transition: all 0.5s;
        }

        .win-animation {
            animation: celebrate 0.5s ease-in-out 3;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            font-size: 18px;
            color: #5a3d5c;
        }

        .stat {
            background: #fff0f3;
            padding: 10px 20px;
            border-radius: 10px;
            min-width: 120px;
        }

        .stat-value {
            font-family: 'Pacifico', cursive;
            font-size: 24px;
            color: #ff4d6d;
            display: block;
            margin-top: 5px;
        }

        .reset-btn {
            margin-top: 25px;
            padding: 12px 30px;
            font-size: 18px;
            background: linear-gradient(45deg, #ff4d6d, #ff758c);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Playfair Display', serif;
            transition: transform 0.3s;
            box-shadow: 0 5px 15px rgba(255, 77, 109, 0.3);
        }

        .reset-btn:hover {
            transform: scale(1.05);
        }

        .key-hint {
            font-size: 14px;
            color: #888;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 32px;
            }
            
            .game-container {
                padding: 20px;
            }
            
            canvas {
                width: 95vw;
                max-width: 400px;
                height: auto;
            }
            
            .control-btn {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .characters {
                gap: 20px;
            }
        }

        /* Wall styles - visible borders */
        .wall-demo {
            display: inline-block;
            width: 20px;
            height: 20px;
            background: #ffb3c6;
            border: 2px solid #ff4d6d;
            margin: 0 5px;
            vertical-align: middle;
        }

        .path-demo {
            display: inline-block;
            width: 20px;
            height: 20px;
            background: #f8f9fa;
            margin: 0 5px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Bring Mitthi to Krishna üíò</h1>
        <p class="subtitle">Navigate through the maze using arrow keys</p>
        
        <div class="instructions">
            <p>Use <strong>arrow keys</strong> or <strong>buttons below</strong> to move Mitthi (‚ù§Ô∏è) through the maze to reach Krishna (üíô).</p>
            <p>Walls: <span class="wall-demo"></span> | Path: <span class="path-demo"></span></p>
        </div>
        
        <div class="characters">
            <div class="character">
                <div class="char-icon mitthi">M</div>
                <div class="char-name">Mitthi</div>
            </div>
            <div class="character">
                <div class="char-icon krishna">K</div>
                <div class="char-name">Krishna</div>
            </div>
        </div>
        
        <div class="maze-wrapper">
            <canvas id="mazeCanvas" width="600" height="480"></canvas>
        </div>
        
        <div class="controls">
            <div class="control-row">
                <button class="control-btn" id="up-btn">‚Üë</button>
            </div>
            <div class="control-row">
                <button class="control-btn" id="left-btn">‚Üê</button>
                <button class="control-btn" id="down-btn">‚Üì</button>
                <button class="control-btn" id="right-btn">‚Üí</button>
            </div>
        </div>
        
        <p class="key-hint">(You can also use keyboard arrow keys)</p>
        
        <div id="message"></div>
        
        <div class="stats">
            <div class="stat">
                Moves: <span class="stat-value" id="moveCount">0</span>
            </div>
            <div class="stat">
                Time: <span class="stat-value" id="timeCount">0s</span>
            </div>
        </div>
        
        <button class="reset-btn" id="resetBtn">Reset Maze</button>
    </div>

    <script>
        // ===== GAME VARIABLES =====
        const canvas = document.getElementById('mazeCanvas');
        const ctx = canvas.getContext('2d');
        const messageEl = document.getElementById('message');
        const moveCountEl = document.getElementById('moveCount');
        const timeCountEl = document.getElementById('timeCount');
        const resetBtn = document.getElementById('resetBtn');

        // Game constants
        const CELL_SIZE = 40;
        const WALL_COLOR = '#ffb3c6';
        const WALL_BORDER = '#ff4d6d';
        const PATH_COLOR = '#f8f9fa';
        const PLAYER_COLOR = '#ff4d6d';
        const TARGET_COLOR = '#4cc9f0';

        // Game state
        let player = { x: 1, y: 1 };
        let target = { x: 13, y: 11 };
        let moves = 0;
        let startTime = Date.now();
        let gameWon = false;

        // ===== MAZE DEFINITION (Medium Difficulty) =====
        // 1 = wall, 0 = path
        const maze = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,1],
            [1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,1],
            [1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,1],
            [1,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1],
            [1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1],
            [1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1],
            [1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,1,0,1,1,1,1,1,1,1,1,1,1,0,1],
            [1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1],
            [1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1],
            [1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1],
            [1,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];

        // ===== INITIALIZE GAME =====
        function initGame() {
            player = { x: 1, y: 1 };
            target = { x: 13, y: 11 };
            moves = 0;
            startTime = Date.now();
            gameWon = false;
            messageEl.textContent = "Use arrows to navigate Mitthi to Krishna!";
            messageEl.classList.remove('win-animation');
            updateStats();
            drawMaze();
            setupControls();
        }

        // ===== DRAW MAZE =====
        function drawMaze() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw maze grid
            for (let row = 0; row < maze.length; row++) {
                for (let col = 0; col < maze[row].length; col++) {
                    const x = col * CELL_SIZE;
                    const y = row * CELL_SIZE;
                    
                    if (maze[row][col] === 1) {
                        // Draw wall
                        ctx.fillStyle = WALL_COLOR;
                        ctx.fillRect(x, y, CELL_SIZE, CELL_SIZE);
                        ctx.strokeStyle = WALL_BORDER;
                        ctx.lineWidth = 2;
                        ctx.strokeRect(x, y, CELL_SIZE, CELL_SIZE);
                        
                        // Add wall pattern
                        ctx.fillStyle = WALL_BORDER;
                        for (let i = 0; i < 4; i++) {
                            const px = x + 5 + (i % 2) * 15;
                            const py = y + 5 + Math.floor(i / 2) * 15;
                            ctx.beginPath();
                            ctx.arc(px, py, 3, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    } else {
                        // Draw path
                        ctx.fillStyle = PATH_COLOR;
                        ctx.fillRect(x, y, CELL_SIZE, CELL_SIZE);
                    }
                }
            }
            
            // Draw target (Krishna)
            drawCharacter(target.x, target.y, TARGET_COLOR, 'K');
            
            // Draw player (Mitthi)
            drawCharacter(player.x, player.y, PLAYER_COLOR, 'M');
        }

        function drawCharacter(x, y, color, letter) {
            const centerX = x * CELL_SIZE + CELL_SIZE / 2;
            const centerY = y * CELL_SIZE + CELL_SIZE / 2;
            const radius = CELL_SIZE / 2 - 4;
            
            // Draw circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.fillStyle = color;
            ctx.fill();
            
            // Add glow effect
            ctx.shadowColor = color;
            ctx.shadowBlur = 10;
            ctx.fill();
            ctx.shadowBlur = 0;
            
            // Draw border
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // Draw letter
            ctx.fillStyle = 'white';
            ctx.font = `bold ${radius}px 'Pacifico', cursive`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(letter, centerX, centerY);
        }

        // ===== CONTROLS =====
        function setupControls() {
            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                if (gameWon) return;
                
                let direction = null;
                switch(e.key) {
                    case 'ArrowUp': direction = 'up'; break;
                    case 'ArrowDown': direction = 'down'; break;
                    case 'ArrowLeft': direction = 'left'; break;
                    case 'ArrowRight': direction = 'right'; break;
                }
                
                if (direction) {
                    e.preventDefault();
                    movePlayer(direction);
                }
            });
            
            // Button controls
            document.getElementById('up-btn').onclick = () => movePlayer('up');
            document.getElementById('down-btn').onclick = () => movePlayer('down');
            document.getElementById('left-btn').onclick = () => movePlayer('left');
            document.getElementById('right-btn').onclick = () => movePlayer('right');
            
            // Reset button
            resetBtn.onclick = initGame;
        }

        function movePlayer(direction) {
            if (gameWon) return;
            
            let newX = player.x;
            let newY = player.y;
            
            switch(direction) {
                case 'up': newY--; break;
                case 'down': newY++; break;
                case 'left': newX--; break;
                case 'right': newX++; break;
            }
            
            // Check if move is valid (not a wall and within bounds)
            if (newY >= 0 && newY < maze.length && 
                newX >= 0 && newX < maze[0].length && 
                maze[newY][newX] === 0) {
                
                player.x = newX;
                player.y = newY;
                moves++;
                updateStats();
                drawMaze();
                
                // Check for win
                if (player.x === target.x && player.y === target.y) {
                    winGame();
                }
            } else {
                // Invalid move feedback
                canvas.style.transform = 'translateX(5px)';
                setTimeout(() => {
                    canvas.style.transform = 'translateX(-5px)';
                    setTimeout(() => {
                        canvas.style.transform = 'translateX(0)';
                    }, 50);
                }, 50);
            }
        }

        // ===== WIN CONDITION =====
        function winGame() {
            gameWon = true;
            const timeTaken = Math.floor((Date.now() - startTime) / 1000);
            
            messageEl.textContent = `üéâ You did it! Mitthi found Krishna! üéâ`;
            messageEl.classList.add('win-animation');
            
            // Celebration effects
            celebrate();
            
            // Show stats
            setTimeout(() => {
                messageEl.innerHTML = `
                    Perfect! üíñ<br>
                    <small>Moves: ${moves} | Time: ${timeTaken}s</small><br>
                    <small>"No matter the maze, I'll always find you" ‚ù§Ô∏è</small>
                `;
            }, 1500);
        }

        function celebrate() {
            // Canvas shake
            canvas.style.animation = 'shake 0.5s ease-in-out 3';
            
            // Add shake animation
            if (!document.querySelector('#shake-style')) {
                const style = document.createElement('style');
                style.id = 'shake-style';
                style.textContent = `
                    @keyframes shake {
                        0%, 100% { transform: translateX(0); }
                        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                        20%, 40%, 60%, 80% { transform: translateX(5px); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // Draw hearts around player
            drawHearts();
        }

        function drawHearts() {
            const centerX = player.x * CELL_SIZE + CELL_SIZE / 2;
            const centerY = player.y * CELL_SIZE + CELL_SIZE / 2;
            
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const angle = (i / 8) * Math.PI * 2;
                    const radius = 50;
                    const heartX = centerX + Math.cos(angle) * radius;
                    const heartY = centerY + Math.sin(angle) * radius;
                    
                    // Draw a small heart
                    ctx.save();
                    ctx.translate(heartX, heartY);
                    ctx.scale(0.5, 0.5);
                    ctx.fillStyle = '#ff4d6d';
                    drawHeartShape(ctx);
                    ctx.fill();
                    ctx.restore();
                }, i * 100);
            }
        }

        function drawHeartShape(ctx) {
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.bezierCurveTo(0, -10, -10, -20, 0, -30);
            ctx.bezierCurveTo(10, -20, 0, -10, 0, 0);
            ctx.closePath();
        }

        // ===== STATS UPDATE =====
        function updateStats() {
            moveCountEl.textContent = moves;
            
            if (!gameWon) {
                const timeElapsed = Math.floor((Date.now() - startTime) / 1000);
                timeCountEl.textContent = `${timeElapsed}s`;
            }
        }

        // ===== START THE GAME =====
        initGame();
        
        // Update time every second
        setInterval(() => {
            if (!gameWon) {
                updateStats();
            }
        }, 1000);
    </script>
</body>
</html>
